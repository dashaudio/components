<link rel="import" href="../bower/polymer/polymer.html" />
<link href="../bower/chartist/dist/chartist.min.css" media="all" rel="stylesheet" />

<script src="../bower/chartist/dist/chartist.min.js"></script>

<!-- Experiment with chartist.js -->

<dom-module id="dash-chart-bar">
  <template>
    <style>
      #chart {
        width: 100%;
        height: 100%;
      }
    </style>

    <div id="chart"></div>
  </template>
</dom-module>

<script>

  Polymer({

    is: 'dash-chart-bar',

    properties: {
      data: {
        type: Array,
        observer: "dataChanged"
      }
    },

    ready: function() {


    },

    dataChanged: function(data) {
      if (data) this.refresh(data);
    },

    refresh: function(data) {

      var options = {
        seriesBarDistance: 10
      };

      var responsiveOptions = [
        // ['screen and (max-width: 640px)', {
        //   seriesBarDistance: 5,
        //   axisX: {
        //     labelInterpolationFnc: function (value) {
        //       return value[0];
        //     }
        //   }
        // }]
      ];

      var d = {};

      d.labels = data.buckets.map(function(datum) {
        return (new Date(datum.key)).getDay();
      });

      d.series = [data.buckets.map(function(datum) {
        return datum.doc_count;
      })];

      new Chartist.Bar('#chart', d, options, responsiveOptions);

    }

  });

</script>
